@model List<TechShop.Models.Order>

@{
    ViewBag.Title = "Quản lý đơn hàng";
}

<div class="main-content">
    <h2 class="page-title"><i class="fas fa-shopping-cart"></i> Quản lý đơn hàng</h2>

    <div class="filter-section">
        @using (Html.BeginForm("Orders", "Admin", FormMethod.Get))
        {
            <div class="filter-row">
                <div class="form-group">
                    <label>Tìm kiếm</label>
                    <input type="text" class="form-control" name="search"
                           placeholder="Mã đơn, tên KH..." />
                </div>

                <div class="form-group">
                    <label>Trạng thái</label>
                    <select name="status" class="form-control">
                        <option value="">Tất cả</option>
                        @foreach (var s in ViewBag.OrderStatuses)
                        {
                            <option value="@s.StatusName">@s.StatusName</option>
                        }
                    </select>
                </div>

                <button type="submit" class="btn-primary">
                    <i class="fas fa-search"></i> Lọc
                </button>
            </div>
        }
    </div>

    <div class="table-card">
        <table>
            <thead>
                <tr>
                    <th>Mã đơn</th>
                    <th>Khách hàng</th>
                    <th>Ngày đặt</th>
                    <th>Trạng thái</th>
                    <th>Tổng tiền</th>
                    <th>Thao tác</th>
                </tr>
            </thead>

            <tbody>
                @foreach (var order in Model)
                {
                    <tr>
                        <td><strong>@order.OrderCode</strong></td>
                        <td>@order.CustomerName<br />@order.CustomerPhone</td>
                        <td>@order.OrderDate.ToString("dd/MM/yyyy")</td>
                        <td>
                            <span class="badge">
                                @order.Status.StatusName
                            </span>
                        </td>
                        <td>@order.FinalAmount.ToString("N0") đ</td>
                        <td>
                            <a href="@Url.Action("OrderDetail", "Admin", new { id = order.OrderID })"
                               class="btn-warning btn-sm">
                                <i class="fas fa-eye"></i>
                            </a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>
